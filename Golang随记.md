# Golang随记

1、变量名、函数名、常量名首字母大写是公开的，首字母小写是私有的。关键字import导入时，下划线让编译器	接受这类导入，并且调用对应包内的所有代码文件里定义的init函数。
	程序中每个代码文件里的init函数都会在main函数执行前调用，导入的包中有init函数，先于main包的init函数	初始化。

2、取模运算符% 正负数运算公式求模 a % b = a - a / b * b

3、>>、<<右移和左移的运算规则：
	右移运算符>>：低位溢出，符号位不变，并用符号位补溢出的高位
	左移运算符<<：符号位不变，低位补0

4、slice，map还有function不能作为map的key

5、map声明是不会分配内存的，初始化需要make，分配内存后才能赋值和使用

6、判断文件是否存在
	golang判断文件夹是否存在的方法为使用os.Stat()函数返回的错误值进行判断：
	1) 如果返回的错误为nil，说明文件或文件夹存在
	2) 如果返回的错误类型使用os.IsNotExist()判断为true，说明文件或文件夹不存在
	3) 如果返回的错误为其它类型，则不确定是否存在
	自己构建一个函数，传入目录或者文件

```go
func PathExist(path string)(bool, error) {
	_, err := os.Stat(path)
	if err == nil { //文件或者目录存在
		return true, nil
	}
	if os.IsNotExist(err) {
		return false, nil
	}
	return false, err
}
```

7、反序列化map和slice时，不需要make，因为make操作被封装到Unmarshal函数中

8、在反序列化一个json字符串时，要确保反序列化后的数据类型和原来的序列化数据类型一致

9、多线程程序在单核上运行，就是并发
	多线程程序在多核上运行，就是并行

10、Go协程的特点
	有独立守望栈空间
	共享程序堆空间
	调度由用户控制
	协程是轻量级的线程

11、channel是线程安全，多个协程操作同一个管道时，不会发生资源竞争问题

12、管道是有类型的，一个string的channel只能存放string类型数据。

13、管道的读写频率不一致不影响。

14、channel可以声明为只读或者只写，默认管道是双向的。
	

```go
var chan1 chan int 可读可写
	var chan2 chan<- int 只写
	var chan3 <-chan int 只读
```

15、如果协程出现panic，可以使用recover来捕获panic进行处理，主线程不受影响，可以继续运行

16、反射最常见的使用场景是做对象的序列化

17、函数返回失败有三种情况：
	一是第一次分配资源失败，直接返回，这时并没有分配成功的资源；
	二是第一次分配资源成功，第二次分配资源失败，函数返回，第二次和第三次的资源都未成功分配，此时err不	为nil，第一次分配成功的资源通过defer释放；
	三是第一二次资源分配成功，第三次资源分配失败，函数返回，第一二次分配成功的资源通过defer释放；
	如果第三次资源分配也成功了，则函数不会返回失败。

18、Golang中分为值类型和引用类型：
	值类型分别有：int系列、float系列、bool、string、数组和结构体
	引用类型有：指针、slice切片、管道channel、接口interface、map、函数等
	值类型的特点是：变量直接存储值，内存通常在栈中分配
	引用类型的特点是：变量存储的是一个地址，这个地址对应的空间里才是真正存储的值，内存通常在堆中分配